<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>OpenClaw Dashboard</title>
<script>
async function loadTasks() {
  const res = await fetch("tasks.json?ts=" + Date.now());
  const data = await res.json();
  const tbody = document.getElementById("task-body");
  tbody.innerHTML = "";

  data.items.forEach(item => {
    const tr = document.createElement("tr");

    const next = item.next_step && item.next_step.trim() ? item.next_step : "-";
    const role = item.owner_role && item.owner_role.trim() ? item.owner_role : "-";
    const block = item.blocked_reason && item.blocked_reason.trim() ? item.blocked_reason : "-";

    tr.innerHTML = `
      <td>${item.category}</td>
      <td>${item.title}</td>
      <td>${item.status}</td>
      <td>${next}</td>
      <td>${role}</td>
      <td>${block}</td>
    `;
    tbody.appendChild(tr);
  });
}

window.onload = loadTasks;
</script>
</head>
<body>
<h2>任務列表</h2>
<table border="1" width="100%">
<thead>
<tr>
<th>類別</th>
<th>任務</th>
<th>狀態</th>
<th>下一步</th>
<th>角色</th>
<th>阻塞原因</th>
</tr>
</thead>
<tbody id="task-body"></tbody>
</table>
</body>
</html>
